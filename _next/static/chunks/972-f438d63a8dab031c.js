"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[972],{42912:function(n,e,r){r.d(e,{p:function(){return R}});var t=r(47568),i=r(26042),a=r(69396),o=r(7297),u=r(70655),c=r(85893),s=r(19321),l=r(8942),d=r(50211),f=r(63699),m=r(39628),p=r(73710),h=r.n(p),g=r(67294),v=r(41248),x=r(53918),y=r(828),b=r(64932),j=function(){var n,e=(0,y.Z)((0,b.Yh)(),2),r=e[0],t=e[1];return{uploadFile:r,loading:t.isLoading,error:t.isError}},w=/image\/(jpeg|jpg|png)/,k=function(){var n=(0,v.I0)(),e=(0,g.useCallback)(function(e){n((0,f.zp)({message:e,severity:"error",open:!0,autoHideDuration:5e3}))},[n]);return(0,g.useCallback)(function(n){return n.length>2?(e("Solo se permiten dos im\xe1genes"),!1):Array.from(n).every(function(n){return w.test(n.type)?!(n.size>2e6)||(e("El archivo es demasiado grande,$$ el tama\xf1o m\xe1ximo permitido es de 2 MB"),!1):(e("Formato de archivo no permitido,$$ solo se aceptan .jpg, .jpeg y .png"),!1)})},[e])},_=r(94184),F=r.n(_),C=r(89583);function Z(){var n=(0,o.Z)(["\n    display: flex;\n    flex-direction: row;\n    gap: 1rem;\n    align-items: center;\n    justify-content: center;\n    flex-wrap: wrap;\n\n    .wrapper {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 0.5rem;\n\n        img {\n            height: 180px;\n            object-fit: cover;\n            border-radius: 0.5rem;\n        }\n\n        p {\n            display: flex;\n            flex-direction: row;\n            gap: 0.5rem;\n            align-items: center;\n            justify-content: center;\n            font-size: 0.8rem;\n            color: ",";\n\n            svg {\n                font-size: clamp(1rem, 2vw, 1.2rem);\n                color: ",";\n\n                &.success {\n                    color: ",";\n                }\n\n                &.error {\n                    color: ",";\n                }\n            }\n        }\n    }\n"]);return Z=function(){return n},n}var E=function(n){var e=n.preview,r=n.fileStatuses,t=n.isError;return(0,c.jsx)(S,{children:e.map(function(n,e){return(0,c.jsxs)("div",{className:"wrapper",children:[(0,c.jsx)("img",{src:n.url,alt:n.name}),(0,c.jsxs)("p",{children:[n.name.length>15?"".concat(n.name.slice(0,15),"..."):n.name,(0,c.jsx)(C.wO,{className:F()({success:r[e].success,error:t})})]})]},"preview-".concat(e))})})},S=x.default.div(Z(),function(n){return h()(n.theme.contrastText,.5)},function(n){return h()(n.theme.contrastText,.5)},function(n){return n.theme.palette.success.main},function(n){return n.theme.palette.error.main}),z=r(6767),T=r.n(z);function I(){var n=(0,o.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    align-items: center;\n    justify-content: center;\n\n    .file-upload {\n        padding: 1rem;\n        border-radius: 0.5rem;\n        width: 100%;\n        text-align: center;\n        color: ",";\n    }\n\n    button {\n        padding: 0.5rem 2rem;\n\n		&:hover {\n			background: ",";\n		}\n\n		&:active {\n			background: ",";\n		}\n\n		&:focus-visible {\n			outline: thin auto ",";\n		}\n    }\n"]);return I=function(){return n},n}var q=function(n){var e=n.handleButtonClick,r=n.handleFileChange,t=n.fileInputRef;return(0,c.jsxs)(A,{children:[(0,c.jsx)("label",{className:"file-upload",children:"Agregar aqu\xed la imagen de tu documento de identidad, Puedes subir una o hasta dos im\xe1genes (ambos lados)."}),(0,c.jsx)("input",{hidden:!0,multiple:!0,type:"file",id:"file-upload",name:"file-upload",ref:t,accept:"image/png, image/jpeg, image/jpg",onChange:r}),(0,c.jsx)(m.z,{variant:"outline",onClick:e,children:"Subir imagen"})]})},A=x.default.div(I(),function(n){return T()(n.theme.contrastText).alpha(.4).string()},function(n){return T()(n.theme.primary).alpha(.05).string()},function(n){return T()(n.theme.primary).alpha(.1).string()},function(n){return n.theme.primary});function N(){var n=(0,o.Z)(["\n	display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-around;\n    gap: 1rem;\n    padding: 1rem;\n	margin: 1rem;\n    min-height: 40vh;\n    background: ",";\n    border: thin dashed ",";;\n    border-radius: 0.5rem;\n"]);return N=function(){return n},n}function O(){var n=(0,o.Z)(["\n	width: 100%;\n	display: flex;\n    flex-direction: row;\n    gap: 1rem;\n    align-items: center;\n    justify-content: center;\n\n    > button {\n		width: 100%;\n		max-width: 200px;\n        padding: calc(0.7vmax + 0.1rem) calc(1vw + 0.5rem);\n\n		&:focus-visible {\n			outline: thin solid ",";\n		}\n    }\n"]);return O=function(){return n},n}var R=function(n){var e,r=n.refetch,o=(0,g.useRef)(null),p=(0,g.useState)([]),h=p[0],x=p[1],y=(0,g.useState)([]),b=y[0],w=y[1],_=(0,g.useState)([]),F=_[0],C=_[1],Z=(0,v.I0)(),S=(0,d.Z)().session,z=j(),T=z.uploadFile,I=z.loading,A=z.error,N=k(),O=(0,g.useState)(!1),R=O[0],L=O[1],P=function(){o.current.click()},B=function(n){var e=n.target.files;e&&N(e)&&(x(Array.from(e)),w(Array.from(e).map(function(n){return{url:URL.createObjectURL(n),name:n.name}})),C(Array.from(e).map(function(){return{loading:!1,success:!1}})))},$=function(){w([]),x([]),C([])},H=(e=(0,t.Z)(function(){var n,e;return(0,u.__generator)(this,function(t){switch(t.label){case 0:if(L(!0),!(h.length>0&&h.length<=2))return[3,4];n=function(n){var e,t,o,c;return(0,u.__generator)(this,function(u){switch(u.label){case 0:C(function(e){return e.map(function(e,r){return r===n?(0,a.Z)((0,i.Z)({},e),{loading:!0}):e})}),(e=new FormData).append("myFile",h[n]),e.append("session",S),e.append("company",s.j1),e.append("type","IDENTITY"),u.label=1;case 1:return u.trys.push([1,6,,7]),[4,T(e).unwrap()];case 2:if("OK"!==(t=u.sent()).result)return[3,4];return Z((0,f.zp)({message:"Archivo cargado con \xe9xito!",severity:"success",open:!0,autoHideDuration:5e3})),C(function(e){return e.map(function(e,r){return r===n?{loading:!1,success:!0}:e})}),[4,(0,l.g)(3e3)];case 3:return u.sent(),w([]),r(),L(!1),[3,5];case 4:"error"===t.result&&"object"==typeof t&&(c="Lo sentimos, hubo un problema al subir tu archivo. Por favor, verifica el tipo de archivo e int\xe9ntalo de nuevo.",(o=t).code&&-71===o.code&&(c="Parece que el archivo no se ha podido cargar correctamente. Por favor, revisa el archivo y vuelve a intentar."),w([]),Z((0,f.zp)({message:c,severity:"error",open:!0,autoHideDuration:5e3})),C(function(e){return e.map(function(e,r){return r===n?(0,a.Z)((0,i.Z)({},e),{loading:!1,success:!1,error:c}):e})}),L(!1)),u.label=5;case 5:return[3,7];case 6:return u.sent(),C(function(e){return e.map(function(e,r){return r===n?{loading:!1,success:!1}:e})}),L(!1),[3,7];case 7:return[2]}})},e=0,t.label=1;case 1:if(!(e<h.length))return[3,4];return[5,(0,u.__values)(n(e))];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})}),function(){return e.apply(this,arguments)});return(0,c.jsx)(U,{children:b.length>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(E,{preview:b,fileStatuses:F,isError:A}),(0,c.jsxs)(D,{children:[(0,c.jsx)(m.z,{variant:"outline",onClick:$,disabled:I||R,children:"Eliminar"}),(0,c.jsx)(m.z,{variant:"contained",type:"submit",onClick:H,loading:I||R,children:"Enviar Solicitud"})]})]}):(0,c.jsx)(q,{handleButtonClick:P,handleFileChange:B,fileInputRef:o})})},U=x.default.div(N(),function(n){return n.theme.palette.light.main},function(n){return h()(n.theme.contrastText,.4)}),D=x.default.div(O(),function(n){return n.theme.primary})},37242:function(n,e,r){r.d(e,{q:function(){return f}});var t=r(7297),i=r(85893),a=r(6767),o=r.n(a),u=r(58115),c=r(73710),s=r.n(c);r(67294);var l=r(53918);function d(){var n=(0,t.Z)(["\n    margin: 1rem;\n    background: ",";\n    border: thin solid ",";\n    color: ",";\n\n    .warning {\n        color: ",";\n        font-weight: 600;\n    }\n\n    .text__paragrah {\n        color: ",";\n        line-height: 1.5;\n    }\n\n    .simple___alert {\n        color: ",";\n        background: ",";\n        border: thin solid ",";\n    }\n\n"]);return d=function(){return n},n}var f=function(n){var e=n.children,r=n.severity;return(0,i.jsx)(m,{severity:r,children:e})},m=(0,l.default)(u.b)(d(),function(n){return"error"===n.severity||"info"===n.severity?n.theme.background:n.theme.palette.alternate12.main},function(n){return s()(n.theme.contrastText,.2)},function(n){return o()(n.theme.status.dark).alpha(.55)},function(n){return n.theme.primary},function(n){return s()(n.theme.contrastText,.5)},function(n){return o()(n.theme.status.dark).alpha(.55)},function(n){return n.theme.palette.alternate12.main},function(n){return n.theme.palette.alternate20.main})},86031:function(n,e,r){r.d(e,{i:function(){return i}});var t=r(64932),i=function(n){var e,r=n.session,i=n.verified,a=(0,t.JO)({session:r},{skip:!r||Boolean(i)}),o=a.data;return{data:o,loading:a.isLoading,refetch:a.refetch}}},64932:function(n,e,r){r.d(e,{JO:function(){return a},Yh:function(){return i}});var t=r(67962).ll.injectEndpoints({endpoints:function(n){return{uploadFile:n.mutation({query:function(n){return{url:"data/uploadFile",method:"POST",body:n}}}),getUserFilesV2:n.query({query:function(n){var e=n.session;return"data/getUserFiles?session=".concat(e)},transformResponse:function(n){return n.files.map(function(n){return{fileId:n.file,status:n.status}})}})}},overrideExisting:!0}),i=t.useUploadFileMutation,a=t.useGetUserFilesV2Query}}]);