"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6113],{16113:function(t,e,n){n.r(e),n.d(e,{SocketCalimaco:function(){return k}});var a=n(59499),i=n(27812),r=n(50029),o=n(87794),s=n.n(o),c=n(95144),u=n(6045),l=n(44603),p=n(88060),d=n(24705),v=n(82771),f=n(21510),b=n(42447),g=n(43335),O=n(41248),m=n(85893);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach(function(e){(0,a.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var y=function(t){var e,n=t.user,a=(0,O.I0)(),o=new p.V,u=(0,l.Z)(null).setJackpotPragmaticAction,h={host:"https://wallet.apuestatotal.com",path:"/api/notifications",cms:"https://new.apuestatotal.com",company:"ATP",user:null!=n?n:{session:"anonymous",user:"anonymous"},notificationCallback:(e=(0,r.Z)(s().mark(function t(e){var r,c,l,p,O,m,h,y,k,E;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.type,t.next="PRAGMATIC_JACKPOTS_UPDATE"===t.t0?3:"LOGIN_OK"===t.t0?5:"POPUP"===t.t0?7:"PROMOTION"===t.t0?9:"UPDATE_BALANCE"===t.t0?11:"LOW_BALANCE"===t.t0?13:"LOGIN_ERROR"===t.t0?15:"USER_VERIFIED"===t.t0?18:"SESSION_EXPIRED"===t.t0?26:30;break;case 3:return u(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.jackpots),t.abrupt("break",30);case 5:return null===(l=localStorage)||void 0===l||l.removeItem("IsLogout"),t.abrupt("break",30);case 7:return null!=e&&e.user&&null!=e&&e.group&&(a((0,f.xh)("notification")),g.ZP.dispatch(d.ll.util.invalidateTags(["Notificationv2"])),g.ZP.dispatch(d.ll.util.invalidateTags(["NotificationPendingv2"])),g.ZP.dispatch(d.ll.util.invalidateTags(["TotalNotificacionsv2"])),g.ZP.dispatch(d.ll.util.invalidateTags(["TotalPendingtNotificacionsv2"]))),t.abrupt("break",30);case 9:return a((0,f.xh)("promotion")),t.abrupt("break",30);case 11:return e.data&&(g.ZP.dispatch(d.ll.util.invalidateTags(["OperationsHistory","OperationsHistoryv2"])),p=n.accounts,O=e.data,h=[].concat((0,i.Z)(O),(0,i.Z)(p)).filter(function(t,e,n){return n.findIndex(function(e){return e.account===t.account})===e}),n.session&&(y=P(P({},n),{},{accounts:h}),a((0,v.av)(y)))),t.abrupt("break",30);case 13:return console.log("Notification LOW_BALANCE: ".concat(JSON.stringify(e.data))),t.abrupt("break",30);case 15:return a((0,v.mc)()),location.reload(),t.abrupt("break",30);case 18:if(!n.session){t.next=25;break}return t.next=21,o.userDetail(n.session);case 21:E=P(P({},t.sent.user),{},{session:n.session}),a((0,v.av)(E)),null!=E&&E.verified&&a((0,b.zp)({message:"Sobrino tu cuenta ha sido verificada.",severity:"success",open:!0,autoHideDuration:3e3}));case 25:return t.abrupt("break",30);case 26:return a((0,v.mc)()),null===(c=localStorage)||void 0===c||c.setItem("IsLogout",JSON.stringify("true")),location.reload(),t.abrupt("break",30);case 30:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)})};return(0,m.jsx)("div",{id:"9895834dsdasdsadsads324-at",style:{opacity:"0",pointerEvents:"none",position:"absolute",visibility:"hidden",transform:"translateX(-200px)"},children:(0,m.jsx)(c.NotificationClient,{config:h})})},k=function(){var t=(0,u.Z)(),e=t.user;return t.session?(0,m.jsx)("div",{id:"9895834dsdasdsadsads324-at",style:{opacity:"0",pointerEvents:"none",position:"absolute",visibility:"hidden"},children:(0,m.jsx)(y,{user:e})}):(0,m.jsx)(m.Fragment,{})}},44603:function(t,e,n){var a=n(27812),i=n(43335),r=n(67294),o=n(56408),s=n(13674),c=function(t){var e,n=null===(e=null==t?void 0:t.skip)||void 0===e||e,c=(0,i.TL)(),u=(0,i.CG)(s.Eh),l=(0,o.dY)(null,{skip:n}).data,p=function(){};(0,r.useEffect)(function(){var t,e;(null==u||null===(t=u.pragmatic)||void 0===t||null===(e=t.levels)||void 0===e||!e.length)&&l&&d(l)},[l]);var d=function(t){if(t.length){var e,n,i=(0,a.Z)(t),r=i.sort(function(t,e){var n=t.amount;return e.amount-n}).map(function(t,e){var n;return{value:t.amount,valueName:0===e?"Grand":1===e?"Mega":2===e?"Major":3===e?"Minor":void 0}});c((0,s.M4)({levels:r,games_ids:null===(e=i[0])||void 0===e?void 0:null===(n=e.games)||void 0===n?void 0:n.split(",")}))}};return{setJackpotPragmaticAction:d,jackpots:u,initJackpotsPragmatic:p}};e.Z=c}}]);