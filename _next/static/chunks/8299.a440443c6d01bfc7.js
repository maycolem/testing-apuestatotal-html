"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8299],{18299:function(t,n,a){a.r(n),a.d(n,{SocketCalimaco:function(){return N}});var i=a(47568),e=a(26042),s=a(69396),o=a(29815),r=a(70655),c=a(85893),u=a(95144),l=a(50211),d=a(16474),v=a(76672),p=a(67962),f=a(43240),g=a(90786),m=a(63699),h=a(17520),P=a(41248),E=function(t){var n,a=t.user,l=(0,P.I0)(),E=new v.V,N=(0,d.Z)(null).setJackpotPragmaticAction,y={host:"https://wallet.apuestatotal.com",path:"/api/notifications",cms:"https://new.apuestatotal.com",company:"ATP",user:null!=a?a:{session:"anonymous",user:"anonymous"},notificationCallback:(n=(0,i.Z)(function(t){var n,i,c,u,d,v,P,y,O;return(0,r.__generator)(this,function(r){switch(r.label){case 0:switch(n=t.type){case"PRAGMATIC_JACKPOTS_UPDATE":return[3,1];case"LOGIN_OK":return[3,2];case"POPUP":return[3,3];case"PROMOTION":return[3,4];case"UPDATE_BALANCE":return[3,5];case"LOW_BALANCE":return[3,6];case"LOGIN_ERROR":return[3,7];case"USER_VERIFIED":return[3,8];case"SESSION_EXPIRED":return[3,11]}return[3,12];case 1:return N(null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.jackpots),[3,12];case 2:return null==localStorage||localStorage.removeItem("IsLogout"),[3,12];case 3:return(null==t?void 0:t.user)&&(null==t?void 0:t.group)&&(l((0,g.xh)("notification")),h.ZP.dispatch(p.ll.util.invalidateTags(["Notificationv2"])),h.ZP.dispatch(p.ll.util.invalidateTags(["NotificationPendingv2"])),h.ZP.dispatch(p.ll.util.invalidateTags(["TotalNotificacionsv2"])),h.ZP.dispatch(p.ll.util.invalidateTags(["TotalPendingtNotificacionsv2"]))),[3,12];case 4:return l((0,g.xh)("promotion")),[3,12];case 5:return t.data&&(h.ZP.dispatch(p.ll.util.invalidateTags(["OperationsHistory","OperationsHistoryv2"])),c=a.accounts,u=t.data,v=(0,o.Z)(u).concat((0,o.Z)(c)).filter(function(t,n,a){return a.findIndex(function(n){return n.account===t.account})===n}),a.session&&(P=(0,s.Z)((0,e.Z)({},a),{accounts:v}),l((0,f.av)(P)))),[3,12];case 6:return console.log("Notification LOW_BALANCE: ".concat(JSON.stringify(t.data))),[3,12];case 7:return l((0,f.mc)()),location.reload(),[3,12];case 8:if(!a.session)return[3,10];return[4,E.userDetail(a.session)];case 9:y=r.sent(),O=(0,s.Z)((0,e.Z)({},y.user),{session:a.session}),l((0,f.av)(O)),(null==O?void 0:O.verified)&&l((0,m.zp)({message:"Sobrino tu cuenta ha sido verificada.",severity:"success",open:!0,autoHideDuration:3e3})),r.label=10;case 10:return[3,12];case 11:return l((0,f.mc)()),null==localStorage||localStorage.setItem("IsLogout",JSON.stringify("true")),location.reload(),[3,12];case 12:return[2]}})}),function(t){return n.apply(this,arguments)})};return(0,c.jsx)("div",{id:"9895834dsdasdsadsads324-at",style:{opacity:"0",pointerEvents:"none",position:"absolute",visibility:"hidden",transform:"translateX(-200px)"},children:(0,c.jsx)(u.NotificationClient,{config:y})})},N=function(){var t=(0,l.Z)(),n=t.user;return t.session?(0,c.jsx)("div",{id:"9895834dsdasdsadsads324-at",style:{opacity:"0",pointerEvents:"none",position:"absolute",visibility:"hidden"},children:(0,c.jsx)(E,{user:n})}):(0,c.jsx)(c.Fragment,{})}},16474:function(t,n,a){var i=a(29815),e=a(17520),s=a(67294),o=a(37457),r=a(12836),c=function(t){var n,a=null===(n=null==t?void 0:t.skip)||void 0===n||n,c=(0,e.TL)(),u=(0,e.CG)(r.Eh),l=(0,o.dY)(null,{skip:a}).data,d=function(){};(0,s.useEffect)(function(){var t,n;(null==u||null===(t=u.pragmatic)||void 0===t||null===(n=t.levels)||void 0===n||!n.length)&&l&&v(l)},[l]);var v=function(t){if(t.length){var n,a,e=(0,i.Z)(t),s=e.sort(function(t,n){var a=t.amount;return n.amount-a}).map(function(t,n){var a;return{value:t.amount,valueName:0===n?"Grand":1===n?"Mega":2===n?"Major":3===n?"Minor":void 0}});c((0,r.M4)({levels:s,games_ids:null===(n=e[0])||void 0===n?void 0:null===(a=n.games)||void 0===a?void 0:a.split(",")}))}};return{setJackpotPragmaticAction:v,jackpots:u,initJackpotsPragmatic:d}};n.Z=c}}]);